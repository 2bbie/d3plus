---
layout: workshop
title: Building a Network
---

<h2 class="bar">About</h2>
<section>
  <p>
    The network visualization is a bit different from the rest of D3plus in that it requires an extra file besides the data and attribute lookups. It is important to note that THIS network visualization code does not attempt to create a dynamic layout based on a nodes and edges list. Instead it requires the user to create and curate their network ahead of time and produce a JSON file of X, Y coordinates. Born from a need to display a network of around 800 nodes and roughly 2000 edges (the Product Space), using this "hack" of precomputing the layout of the network allows the user to display much larger networks without hoggin all of the resources on the client's machine. Therefore, the D3plus network visualization is not a substitute for such network visualization libraries as <a href="http://arborjs.org/">Arbor.js</a>, <a href="http://sigmajs.org/">Sigma.js</a> or even D3's own built in <a href="http://bl.ocks.org/mbostock/4062045">force-directed graph</a> layout. Below is an excerpt of the artist network file we will be using in this workshop.
  </p>
</section>
<section class="topic-2">
  <div class="example">
    <h3>Example structure of <a href="https://gist.github.com/alexandersimoes/7519613">artist_similarity.json</a></h3>
    <div class="note">
      <h4>Where did this data come from?</h4>
      <p>To clear up any confusion, D3plus does not calculate similarity of your data points. This data is all part of the <a href="http://labrosa.ee.columbia.edu/millionsong/">Million Song Dataset</a> stored in the <a href="https://github.com/tb2332/MSongsDB/blob/master/PythonSrc/hdf5_getters.py#L145-L154">get_similar_artists</a> attribute of each song.</p>
    </div>
  </div>
  <div class="code">
    <script src="https://gist.github.com/alexandersimoes/7519613.js"></script>
  </div>
</section>


<h2 class="bar">Building The Network</h2>
<section>
  <p>
    Now that we know about this other file required to build the network, we can load this from our server and combine our knowledge of how the other visualizations are built to create an Artist Space. The only unique attributes to this visualization are the <code>.nodes()</code> and <code>.edges()</code> functions which each take arrays in the format specified above.
  </p>
  <h3>D3plus and Color</h3>
  <p>
    As we are working our way through the various methods of D3plus' viz object, you may be curious about the <code>.color()</code> attribute. This method expects a string of the key for the data value which you would like to set the color of each node based on. If the value of the specified key is a hex value it will simply use that to set the color. If the values are numbers with both negatives and positives D3plus will map these values to a spectrum of red to grey for negative values and grey to green for positives. On the other hand, if all numbers are positive, D3plus will use a standard heat map and interpolate RGB values as shown below. Finally if the color method is never set, or if the values are non-hex strings, the function will return a consistent random color based on <a href="https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-category20b">D3's category20b</a> helper set of colors.
  </p>
  <p class="learn_more">
    Learn more about how D3plus handles setting colors by <a href="https://github.com/alexandersimoes/d3plus/blob/master/src/utils/variables.js#L61-L89" target="_blank">taking a peek under the hood</a>.
  </p>
</section>
<section class="topic-2">
  <div class="example">
    <iframe style="height: 220px" src="/million_songs/network_artists.html"></iframe>
    <a class="button tertiary standalone" href="/million_songs/network_artists.html" target="_blank">View standalone &rarr;</a>
    <br><br>
  </div>
  <div class="code">
    <script src="https://gist.github.com/alexandersimoes/7519739.js"></script>
  </div>
</section>