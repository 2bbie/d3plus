---
layout: default
---

{% assign url = page.url|split:'/' %}
{% assign file = url[3]|split: '.' %}
{% assign id = file[0] %}

{% if page.user == null %}
  {% assign user = 'davelandry' %}
{% else %}
  {% assign user = page.user %}
{% endif %}

<section>
  <h2>{{ id }}</h2>
  <a class="button right" href="http://bl.ocks.org/{{user}}/raw/{{id}}/" target="_blank">
    View Standalone <i class='fa fa-angle-right'></i>
  </a>
  <p class="example"></p>
  <iframe src="http://bl.ocks.org/{{user}}/raw/{{id}}/" width="990" height="640"></iframe>
  <script src="https://gist.github.com/{{user}}/{{id}}.js?file=index.html"></script>
</section>

<script src="/js/d3.js"></script>
<script src="/js/showdown.js"></script>

<script>

  var id = {{ id }}

  d3.json("https://api.github.com/gists/"+id,function(error,gist){

    if (error || gist.length == 0) {

      d3.select("section h2").text("Error loading example.")

    }
    else {

      var section = d3.select("section")

      var title = gist.description || id

      document.title = title +" with D3plus"

      section.select("h2").text(title)

      var readme = gist.files["README.md"]
      if (readme) {

        var md = readme.content.replace(/\n\nFeatured on \[D3plus\.org\]\(http\:\/\/www\.d3plus\.org\/\)/g,"")
        md = md.replace(/\nFeatured on \[D3plus\.org\]\(http\:\/\/www\.d3plus\.org\/\)/g,"")
        md = md.replace(/Featured on \[D3plus\.org\]\(http\:\/\/www\.d3plus\.org\/\)/g,"")

        var converter = new Showdown.converter(),
            html = converter.makeHtml(md)

        section.select("p").html(html)

      }

    }

  })

</script>
