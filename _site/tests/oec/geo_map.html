<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link href="../../d3plus.css" rel="stylesheet" type="text/css">
  <style>

  body {
    margin: 0px;
  }
  
  div#viz {
    width: 100%;
    height: 100%;
  }

  </style>
  
</head>
<body>

<div id="viz">Test</div>

<script src="../../lib/d3.js"></script>
<script src="../../lib/topojson.js"></script>
<script src="../../lib/modernizr.custom.js"></script>

<script src="../../src/general.js"></script>
<script src="../../src/public.js"></script>
<script src="../../src/viz.js"></script>

<script src="../../src/apps/geo_map.js"></script>

<script src="../../src/data/analyze.js"></script>
<script src="../../src/data/color.js"></script>
<script src="../../src/data/fetch.js"></script>
<script src="../../src/data/filter.js"></script>
<script src="../../src/data/format.js"></script>
<script src="../../src/data/nest.js"></script>

<script src="../../src/shapes/area.js"></script>
<script src="../../src/shapes/color.js"></script>
<script src="../../src/shapes/coordinates.js"></script>
<script src="../../src/shapes/donut.js"></script>
<script src="../../src/shapes/draw.js"></script>
<script src="../../src/shapes/fill.js"></script>
<script src="../../src/shapes/labels.js"></script>
<script src="../../src/shapes/line.js"></script>
<script src="../../src/shapes/links.js"></script>
<script src="../../src/shapes/rect.js"></script>
<script src="../../src/shapes/style.js"></script>

<script src="../../src/styles/default.js"></script>

<script src="../../src/tooltip/app.js"></script>
<script src="../../src/tooltip/arrow.js"></script>
<script src="../../src/tooltip/create.js"></script>
<script src="../../src/tooltip/data.js"></script>
<script src="../../src/tooltip/move.js"></script>
<script src="../../src/tooltip/remove.js"></script>

<script src="../../src/ui/error.js"></script>
<script src="../../src/ui/key.js"></script>
<script src="../../src/ui/titles.js"></script>

<script src="../../src/utils/color.js"></script>
<script src="../../src/utils/utils.js"></script>
<script src="../../src/utils/variables.js"></script>
<script src="../../src/utils/wordwrap.js"></script>

<script src="../../src/zoom/bounds.js"></script>
<script src="../../src/zoom/reset.js"></script>

<script>

  var viz = d3plus.viz()

  d3.json("data/country_coords.json", function(coords) {
    d3.json("data/country_attrs.json", function(attrs) {
      d3.json("data/country_export_horses.json", function(data) {
        
        data.data.forEach(function(d){
          d.id = d.origin_id
        })
      
        viz
          // .dev(true)
          .type("geo_map")
          .container("#viz")
          .id("id")
          .attrs(attrs.data)
          .data(data.data)
          .coords(coords)
          .color("export_val")
          .text("name")
          .tooltip(["export_val"])
          .time("year")
          .time({"solo": [2007,2008,2009,2010]})
          .draw()
        
      });
    });
  });
  

</script>
</body>
</html>