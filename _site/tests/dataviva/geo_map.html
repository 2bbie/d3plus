<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link href="../../d3plus.css" rel="stylesheet" type="text/css">
  <style>

  body {
    margin: 0px;
  }

  </style>

  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
  
</head>
<body>

<div id="viz"></div>

<script src="../../lib/d3.js"></script>
<!-- <script src="../../lib/d3.geo.tile.js"></script> -->
<script src="../../lib/topojson.js"></script>
<script src="../../lib/modernizr.custom.js"></script>

<script src="../../src/general.js"></script>
<script src="../../src/public.js"></script>
<script src="../../src/viz.js"></script>

<script src="../../src/apps/geo_map.js"></script>

<script src="../../src/data/color.js"></script>
<script src="../../src/data/filter.js"></script>
<script src="../../src/data/format.js"></script>
<script src="../../src/data/nest.js"></script>

<script src="../../src/shapes/area.js"></script>
<script src="../../src/shapes/color.js"></script>
<script src="../../src/shapes/coordinates.js"></script>
<script src="../../src/shapes/donut.js"></script>
<script src="../../src/shapes/draw.js"></script>
<script src="../../src/shapes/fill.js"></script>
<script src="../../src/shapes/labels.js"></script>
<script src="../../src/shapes/line.js"></script>
<script src="../../src/shapes/links.js"></script>
<script src="../../src/shapes/rect.js"></script>
<script src="../../src/shapes/style.js"></script>

<script src="../../src/styles/default.js"></script>

<script src="../../src/tooltip/app.js"></script>
<script src="../../src/tooltip/arrow.js"></script>
<script src="../../src/tooltip/create.js"></script>
<script src="../../src/tooltip/data.js"></script>
<script src="../../src/tooltip/move.js"></script>
<script src="../../src/tooltip/remove.js"></script>

<script src="../../src/utils/color.js"></script>
<script src="../../src/ui/error.js"></script>
<script src="../../src/ui/titles.js"></script>
<script src="../../src/utils/utils.js"></script>
<script src="../../src/utils/variables.js"></script>
<script src="../../src/utils/wordwrap.js"></script>

<script src="../../src/zoom/bounds.js"></script>
<script src="../../src/zoom/reset.js"></script>

<script>

  d3.json("data/geo/ap_munic.json", function(shapes) {
    d3.json("data/geo/land.json", function(land) {
      d3.json("data/munic_a0112.json", function(geo_data) {
        d3.json("data/attr_munic.json", function(attr) {
          
          var data = geo_data.data.filter(function(d,i){
            return d.bra_id.substr(0,2) == "ap"
          })
          
          // var data = [
          //   {"bra_id": "USA", "wage": 100},
          //   {"bra_id": "BRA", "wage": 200},
          //   {"bra_id": "CHN", "wage": 20000}
          // ]
          
          viz = d3plus.viz()
            // .dev(true)
            .type("geo_map")
            .container("#viz")
            .id("bra_id")
            .data(data)
            .coords(shapes)
            // .attrs(attr)
            .color("wage")
            .text("bra_id")
            .tooltip(["wage", "id", "num_emp"])
            .time({"key": "year", "solo": 2010})
            .shape("coordinates")
            
          viz.draw()
        
        });
      });
    });
  });
  

</script>
</body>
</html>