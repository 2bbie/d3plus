<!DOCTYPE html>
<meta charset="utf-8">
<link href="../../d3plus.css" rel="stylesheet" type="text/css">
<style>

body {
  margin: 0px; padding:0;
}


</style>
<body style="overflow:hidden">

<div id="viz"></div>

<script src="../../lib/d3.js"></script>
<script src="../../lib/modernizr.custom.js"></script>
<!-- <script src="../../d3plus.js"></script> -->

<script src="../../src/general.js"></script>
<script src="../../src/public.js"></script>
<script src="../../src/viz.js"></script>

<script src="../../src/apps/bubbles.js"></script>
<script src="../../src/apps/chart.js"></script>
<script src="../../src/apps/line.js"></script>
<script src="../../src/apps/network.js"></script>
<script src="../../src/apps/rings.js"></script>
<script src="../../src/apps/stacked.js"></script>
<script src="../../src/apps/tree_map.js"></script>

<script src="../../src/data/color.js"></script>
<script src="../../src/data/filter.js"></script>
<script src="../../src/data/format.js"></script>
<script src="../../src/data/nest.js"></script>

<script src="../../src/shapes/area.js"></script>
<script src="../../src/shapes/color.js"></script>
<script src="../../src/shapes/donut.js"></script>
<script src="../../src/shapes/draw.js"></script>
<script src="../../src/shapes/fill.js"></script>
<script src="../../src/shapes/labels.js"></script>
<script src="../../src/shapes/line.js"></script>
<script src="../../src/shapes/links.js"></script>
<script src="../../src/shapes/rect.js"></script>
<script src="../../src/shapes/style.js"></script>

<script src="../../src/styles/default.js"></script>

<script src="../../src/tooltip/app.js"></script>
<script src="../../src/tooltip/arrow.js"></script>
<script src="../../src/tooltip/create.js"></script>
<script src="../../src/tooltip/data.js"></script>
<script src="../../src/tooltip/move.js"></script>
<script src="../../src/tooltip/remove.js"></script>

<script src="../../src/utils/color.js"></script>
<script src="../../src/ui/error.js"></script>
<script src="../../src/ui/titles.js"></script>
<script src="../../src/utils/utils.js"></script>
<script src="../../src/utils/variables.js"></script>
<script src="../../src/utils/wordwrap.js"></script>

<script>

var viz = d3plus.viz()

d3.json("data/artists_indented.json", function(artists){
  d3.json("data/albums_indented.json", function(albums){
    d3.json("data/songs_indented.json", function(songs){
      d3.json("data/sample.json", function(sample){
        d3.json("data/artist_similarity.json", function(network){
    
        var attrs = {"artist_id": artists, "album_id": albums, "song_id": songs}
        var attrs = sample
        
        function yearsolo(d){
          return d > 2000 && d < 2011
        }
        
        active = function(d){
          return d.close
        }
        
        viz
          // .dev(true)
          // .data(songs)
          .data(sample.song_id)
          .type("chart")
          .attrs(attrs)
          .size("hotttnesss")
          .active(active)
          // .active("grammy")
          .temp("close")
          // .aggs({"duration": "mean", "hotttnesss": "mean", "loudness": "mean"})
          // .id("artist_id")
          .id(["artist_id","album_id","song_id"])
          // .id({"solo": "AR3TG3X1187FB4D577"})
          // .id({"solo": ["ARJ7KF01187B98D717","AR6XPWV1187B9ADAEB"]})
          .text({"artist_id":"names","album_id":"name","song_id":["song_title","song_id","loudness"]})
          // .tooltip({"artist_id":["names","hotttnesss"],"album_id":["name"],"song_id":["song_title"]})
          .tooltip({"short": {"artist_id":["names"]}, "long": {"artist_id":["names"],"album_id":["name"],"song_id":["song_title"]}})
          // .tooltip({"html": "Text"})
          // .time({"key": "year", "solo": yearsolo})
          .time("year")
          // .x("year")
          .y("hotttnesss")
          .x("year")
          // .x({"key": "year", "scale": "continuous", "zerofill": true})
          // .y({"key": "hotttnesss", "scale": "linear", "stacked": true})
          .axes({"static": false})
          .color({"artist_id": "names"})
          // .color({"album_id": "color"})
          // .color("hotttnesss")
          .depth(1)
          .shape("circle")
          // .nodes(network.nodes)
          // .links(network.edges)
          .focus("ARJ7KF01187B98D717")
          .container("#viz")
          .style({"labels": {"align": "middle"}})
          .draw(true)
  
        })
      })
    })
  })
})

</script>